<ng-container [ngTemplateOutlet]="editing ? thenBlock : elseBlock"></ng-container>

<ng-template #thenBlock>
  <form #f="ngForm">
    <mat-form-field appearance="outline">
      <mat-label>Produto</mat-label>
      <input matInput placeholder="Ex. Vestido" name="product" [(ngModel)]="product.value" type="text" />
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Preço de aquisição</mat-label>
      <input
        matInput
        name="acquisitionPrice"
        [(ngModel)]="product.acquisitionPrice"
        currencyMask
        [options]="{ allowNegative: false }"
        type="text"
      />
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Preço de venda</mat-label>
      <input matInput name="sellingPrice" [(ngModel)]="product.sellingPrice" currencyMask type="text" />
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Quantidade em estoque</mat-label>
      <input matInput name="quantity" [(ngModel)]="product.quantity" type="number" />
    </mat-form-field>

    <mat-slide-toggle [(ngModel)]="product.active" color="primary" name="active" class="mb-20">
      Produto ativo: {{ product.active ? 'Sim' : 'Não' }}
    </mat-slide-toggle>

    <ng-select
      [(ngModel)]="product.department"
      appearance="outline"
      notFoundText="Nenhum departamento foi encontrado"
      name="department"
      placeholder="Departamento"
      class="my-ng-select"
      [compareWith]="compareWithFn"
      [multiple]="true"
    >
      <ng-option *ngFor="let department of departments" [value]="department">{{ department.value }}</ng-option>
    </ng-select>

    <mat-form-field appearance="outline">
      <mat-label>Descrição</mat-label>
      <textarea rows="10" matInput name="description" [(ngModel)]="product.description" type="text"></textarea>
    </mat-form-field>

    <button mat-flat-button color="primary" *ngIf="editing">Enviar</button>
  </form>
</ng-template>

<ng-template #elseBlock>
  <p><strong>Nome do produto:</strong> {{ product.value }}</p>
  <p><strong>Preço de aquisição:</strong> {{ product.acquisitionPrice | currency }}</p>
  <p><strong>Preço de venda:</strong> {{ product.sellingPrice | currency }}</p>
  <p><strong>Quantidade em estoque:</strong> {{ product.quantity }}</p>
  <p><strong>Quantidade vendida:</strong> {{ product.quantitySold }}</p>
  <p><strong>Departamentos:</strong> {{ product.department | join : 'value' }}</p>
</ng-template>
